#!/bin/sh

STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACMR)

echo "$STAGED_FILES" | grep -E '\.(js|jsx|ts|tsx|json|md|css|html)$' | xargs npx prettier --write --ignore-unknown

echo "$STAGED_FILES" | grep -E '\.(js|jsx|ts|tsx)$' | xargs npx eslint --cache --fix

echo "$STAGED_FILES" | xargs git add

echo "$STAGED_FILES" | grep -E '\.(js|jsx|ts|tsx)$' | xargs npx eslint --max-warnings=0

git update-index --again